<?xml version="1.0" encoding="UTF-8"?><script><script_id>6:WPDS</script_id><name>SetNoCancelBean</name><script_type_id>3</script_type_id><row_version>84</row_version><lu_id>SNEHAI</lu_id><lu_date>2015-10-27T00:55:45</lu_date><false_msg/><description/><emit_events>0</emit_events><script_line><script_line_id>132:TEST</script_line_id><script_id>6:WPDS</script_id><sequence>1</sequence><script_class_id>7</script_class_id><source_name>LOCAL</source_name><row_version>1</row_version><lu_id>SNEHAI</lu_id><lu_date>2015-10-27T00:55:45</lu_date><statement>// Order Jar Files[lf]importPackage(Packages.com.csgsystems.om.session);[lf]importPackage(Packages.com.csgsystems.om.data);[lf][lf]// Standard Java Files[lf]importPackage(Packages.java.math);[lf]importPackage(Packages.java.util);[lf]importPackage(Packages.java.lang);[lf][lf]// Workpoint Files[lf]importPackage(Packages.com.workpoint.client);[lf]importPackage(Packages.com.workpoint.common.util);[lf]// Security Files[lf]importPackage(Packages.com.csgsystems.fx.security);[lf]// Bali Files[lf]importPackage(Packages.com.csgsystems.aruba.connection);[lf][lf]importPackage(Packages.com.workpoint.common.logging);[lf][lf]logger = WPLogger.getLogger("com.workpoint.comverse.SetNoCancel");[lf][lf]logger.info("INFO: ActivityInstId: " + [lf]    SymbolTable.getSymbol("ActInstIDStr").getPrimaryValue() +[lf]    " Iteration: " + SymbolTable.getSymbol("WorkItemIteration").getPrimaryValue());[lf][lf]try[lf]{[lf]   // Check to see if this script is ran in a subjob[lf]   if (ThisJobData.getJobParentID())[lf]  {[lf]     job = Job.queryByID(ClientContext, ThisJobData.getJobParentID(), true);[lf]     serverid = new Integer(job.getBulkUserDataString("CustomerServerId"));[lf]     soid = job.getBulkUserDataString("ServiceOrderId");[lf]   }[lf]   else[lf]   {[lf]      serverid = new Integer(ThisJobData.getBulkUserDataString("CustomerServerId"));[lf]      soid = ThisJobData.getBulkUserDataString("ServiceOrderId");[lf]   }[lf]     logger.debug("DEBUG: CustomerServerId: " + serverid);[lf]     logger.debug("DEBUG: ServiceOrderId: " + soid);[lf][lf]     sm = SecurityManagerFactory.createSecurityManager ();[lf]     bean = new ServiceOrderBean(BSDMSettings.getDefault ());[lf]     obj = new ServiceOrderObjectData();[lf]     [lf]     logger.debug("DEBUG: ServiceOrderId: " + serverid);[lf]     obj.setServiceOrderId(new BigInteger(soid.toString()));[lf]     obj.setNoCancel(true);[lf] [lf]    context = BSDMSessionContext.getDefaultContext();[lf]    context.setSecurityContext (sm);[lf]    context.setServerId(serverid);[lf][lf]    logger.debug("DEBUG: Calling ServiceOrderBean.update");[lf]    rtnobj = bean.update(context, obj);[lf]    logger.debug("DEBUG: Return from Update: " + rtnobj);[lf]}[lf]catch(e)[lf]{[lf]  java.lang.System.out.println("exception: " + e);[lf]  // need to put job in error[lf]  Job.recordError(ClientContext, [lf]                             new TableID(SymbolTable.getSymbol("ProcInstIDStr").getPrimaryValue()),[lf]                             "exception, see logs for details"); [lf]}</statement><name/><validation_status>0</validation_status><validation_status_msg/></script_line><validation_status>0</validation_status></script>