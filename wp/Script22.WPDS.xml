<?xml version="1.0" encoding="UTF-8"?><script><script_id>22:WPDS</script_id><name>RunOnceFirstReached</name><script_type_id>3</script_type_id><row_version>96</row_version><lu_id>SNEHAI</lu_id><lu_date>2015-10-27T00:57:55</lu_date><false_msg/><description/><emit_events>0</emit_events><script_line><script_line_id>213:TEST</script_line_id><script_id>22:WPDS</script_id><sequence>1</sequence><script_class_id>7</script_class_id><source_name>LOCAL</source_name><row_version>1</row_version><lu_id>SNEHAI</lu_id><lu_date>2015-10-27T00:57:55</lu_date><statement>importPackage(Packages.com.workpoint.common.data);[lf][lf]SymbolTable.add("colid", ThisJobData.getBulkUserDataString("OrderId"));[lf]// Need to use proc_node_template_id for the actid[lf]SymbolTable.add("actid", ThisJobNodeData.getProcessNodeTemplateID().getID());[lf]SymbolTable.add("actdb",ThisJobNodeData.getProcessNodeTemplateID().getDB());[lf]SymbolTable.add("result", "-1");</statement><name/><validation_status>0</validation_status><validation_status_msg/></script_line><script_line><script_line_id>214:TEST</script_line_id><script_id>22:WPDS</script_id><sequence>2</sequence><script_class_id>1</script_class_id><source_name>LOCAL</source_name><row_version>1</row_version><lu_id>SNEHAI</lu_id><lu_date>2015-10-27T00:57:55</lu_date><statement>{call WP_RUN_ONCE_FIRST(:colid[char,input], :ProcInstID[char,input], :ProcInstDB[char,input], :actid[char,input], :actdb[char,input], :result[char,output]) }</statement><name/><validation_status>0</validation_status><validation_status_msg/></script_line><script_line><script_line_id>215:TEST</script_line_id><script_id>22:WPDS</script_id><sequence>3</sequence><script_class_id>7</script_class_id><source_name>LOCAL</source_name><row_version>1</row_version><lu_id>SNEHAI</lu_id><lu_date>2015-10-27T00:57:55</lu_date><statement>importPackage(Packages.com.workpoint.common.script);[lf]importPackage(Packages.com.workpoint.common.data);[lf]importPackage(Packages.com.workpoint.common.util);[lf]importPackage(Packages.com.workpoint.client);[lf][lf]// check if we run[lf]var run = SymbolTable.getSymbol("result").getPrimaryValue();[lf]if( run == "0" )[lf]{[lf]  // complete activity [lf]  SymActID = SymbolTable.getSymbol("ActInstID").getPrimaryValue();[lf]  SymActDB = SymbolTable.getSymbol("ActInstDB").getPrimaryValue();[lf]  SymIteration = SymbolTable.getSymbol("WorkItemIteration").getPrimaryValue();[lf]  activity = new TableID(SymActID + ":" + SymActDB);[lf][lf]  job = Job.queryByID(ClientContext, new TableID(SymbolTable.getSymbol("ProcInstIDStr").getPrimaryValue()), true);[lf]  work = WorkItemEntry.queryByID(ClientContext, activity, SymIteration);[lf][lf]  if( work != null )[lf]  {[lf]      workstate = work.getWorkStateID();[lf]      if( workstate == WorkItemConst.WORK_STATE_AVAILABLE ) // Available[lf]        work.open();[lf][lf]     work.changeState(WorkItemConst.WORK_STATE_COMPLETE, 0, 51, "Completed by system:  Another runonce node is running");[lf]  }[lf]  ThisJobData.setActivityBulkUserData(ThisActivityInstData.getActivityInstID(), "skip","true");[lf]}</statement><name/><validation_status>0</validation_status><validation_status_msg/></script_line><validation_status>0</validation_status></script>